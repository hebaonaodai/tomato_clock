import{_ as x,r as v,c as D,o as y,a as I,w as M,b as m,d as s,e as L,f as C,g as V,u as i,h as p,i as f,v as h,j as B,k as l,t as k}from"./index-DcGtALlu.js";import{u as W}from"./timer-R0U0qCYX.js";const U={class:"bg"},$={class:"center-card"},A={class:"circle-progress"},H={class:"circle-center"},N={class:"main-time"},R={class:"status"},j={class:"btn-group"},z={class:"settings-area"},E={class:"settings-row"},q={__name:"Home",setup(F){const e=W();let n=null;const r=v("mixkit-interface-hint-notification-911.wav"),a=v(e.workDuration),u=D(()=>{const o=e.isWorkTime?e.workDuration*60:e.breakDuration*60;if(o<=0||e.timeLeft<=0)return 0;const t=(o-e.timeLeft)/o*100;return Math.min(100,Math.max(0,t))}),g=()=>{e.startTimer(),n&&clearInterval(n),n=setInterval(()=>{console.log("当前剩余时间:",e.timeLeft,"进度值:",u.value),e.timeLeft>0?e.updateTimeLeft(e.timeLeft-1):(clearInterval(n),_(),e.toggleMode(),e.resetTimer())},1e3)},T=o=>{const t=Math.floor(o/60),c=o%60;return`${t.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`},b=()=>{e.pauseTimer(),clearInterval(n)},w=()=>{clearInterval(n),e.resetTimer()},_=()=>{r.value!=="none"&&new Audio(`/sounds/${r.value}`).play().catch(t=>console.error("播放音频失败:",t))},S=()=>{e.updateWorkDuration(a.value),e.resetTimer()};return y(()=>{e.resetTimer()}),I(()=>{n&&clearInterval(n)}),M(()=>e.workDuration,o=>{a.value=o}),(o,t)=>{const c=V("van-circle");return l(),m("div",U,[t[9]||(t[9]=s("div",{class:"header"},[s("h1",null,"番茄时钟"),s("p",{class:"subtitle"},"专注25分钟，提高工作效率")],-1)),s("div",$,[s("div",A,[(l(),L(c,{key:u.value,"current-rate":Math.round(u.value),rate:100,speed:100,size:300,"stroke-width":24,"stroke-linecap":o.round,color:"#ff0000","layer-color":"#f2f2f2"},{default:C(()=>[s("div",H,[s("div",N,k(T(i(e).timeLeft)),1),s("div",R,k(i(e).isRunning?i(e).isWorkTime?"专注中":"休息中":"准备开始"),1)])]),_:1},8,["current-rate","stroke-linecap"]))]),s("div",j,[i(e).isRunning?(l(),m("button",{key:1,class:"btn pause",onClick:b},t[3]||(t[3]=[s("span",{class:"icon"},"⏸",-1),p(" 暂停 ")]))):(l(),m("button",{key:0,class:"btn start",onClick:g},t[2]||(t[2]=[s("span",{class:"icon"},"▶",-1),p(" 开始 ")]))),s("button",{class:"btn reset",onClick:w},t[4]||(t[4]=[s("span",{class:"icon"},"🔄",-1),p(" 重置 ")]))]),s("div",z,[t[8]||(t[8]=s("h3",null,"设置",-1)),s("div",E,[t[6]||(t[6]=s("label",null,"专注时间（分钟）",-1)),f(s("input",{type:"number",min:"1",max:"60","onUpdate:modelValue":t[0]||(t[0]=d=>a.value=d),onChange:S},null,544),[[h,a.value,void 0,{number:!0}]]),t[7]||(t[7]=s("label",null,"提示音",-1)),f(s("select",{"onUpdate:modelValue":t[1]||(t[1]=d=>r.value=d)},t[5]||(t[5]=[s("option",{value:"none"},"无",-1),s("option",{value:"mixkit-interface-hint-notification-911.wav"},"铃铛",-1)]),512),[[B,r.value]])])])]),t[10]||(t[10]=s("div",{class:"footer"},"专注工作，高效生活 © 2025",-1))])}}},K=x(q,[["__scopeId","data-v-c6e3088d"]]);export{K as default};
